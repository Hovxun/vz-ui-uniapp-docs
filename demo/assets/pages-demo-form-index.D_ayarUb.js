import{_ as e}from"./vz-input.ymQrniLa.js";import{d as r,J as t,m as s,r as n,K as a,L as l,M as i,N as o,o as u,c as d,w as f,p as c,u as p,n as m,v as g,b as y,e as h,t as v,q as b,f as q,l as w,O as F,a as $}from"./index-EUel_XYz.js";import{r as x}from"./uni-app.es.CgqJnnkI.js";import{c as j}from"./bem.DA8SpLb8.js";import{a as A}from"./unit.icpP3CzZ.js";import{d as O,s as _,n as E,g as P,a as k}from"./utils.Cxb1e_sX.js";import{F as V,a as C}from"./constants.ib7AlcVB.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as R}from"./vz-button.ClwtBboB.js";import"./vz-icon.BCw2lV4Q.js";import"./vz-loading.BIGJquNL.js";const T=/%[sdj%]/g;let D=()=>{};function S(e){if(!e||!e.length)return null;const r={};return e.forEach((e=>{const t=e.field;r[t]=r[t]||[],r[t].push(e)})),r}function B(e,...r){let t=0;const s=r.length;if("function"==typeof e)return e.apply(null,r);if("string"==typeof e){return e.replace(T,(e=>{if("%%"===e)return"%";if(t>=s)return e;switch(e){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch(n){return"[Circular]"}break;default:return e}}))}return e}function N(e,r){return null==e||(!("array"!==r||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(r)||"string"!=typeof e||e))}function H(e,r,t){let s=0;const n=e.length;!function a(l){if(l&&l.length)return void t(l);const i=s;s+=1,i<n?r(e[i],a):t([])}([])}class I extends Error{constructor(e,r){super("Async Validation Error"),this.errors=e,this.fields=r}}function M(e,r,t,s,n){if(r.first){const r=new Promise(((r,a)=>{const l=function(e){const r=[];return Object.keys(e).forEach((t=>{r.push(...e[t]||[])})),r}(e);H(l,t,(e=>(s(e),e.length?a(new I(e,S(e))):r(n))))}));return r.catch((e=>e)),r}const a=!0===r.firstFields?Object.keys(e):r.firstFields||[],l=Object.keys(e),i=l.length;let o=0;const u=[],d=new Promise(((r,d)=>{const f=e=>{if(u.push.apply(u,e),o++,o===i)return s(u),u.length?d(new I(u,S(u))):r(n)};l.length||(s(u),r(n)),l.forEach((r=>{const s=e[r];-1!==a.indexOf(r)?H(s,t,f):function(e,r,t){const s=[];let n=0;const a=e.length;function l(e){s.push(...e||[]),n++,n===a&&t(s)}e.forEach((e=>{r(e,l)}))}(s,t,f)}))}));return d.catch((e=>e)),d}function W(e,r){return t=>{let s;return s=e.fullFields?function(e,r){let t=e;for(let s=0;s<r.length;s++){if(null==t)return t;t=t[r[s]]}return t}(r,e.fullFields):r[t.field||e.fullField],(n=t)&&void 0!==n.message?(t.field=t.field||e.fullField,t.fieldValue=s,t):{message:"function"==typeof t?t():t,fieldValue:s,field:t.field||e.fullField};var n}}function Z(e,r){if(r)for(const t in r)if(r.hasOwnProperty(t)){const s=r[t];"object"==typeof s&&"object"==typeof e[t]?e[t]={...e[t],...s}:e[t]=s}return e}const J=(e,r,t,s,n,a)=>{!e.required||t.hasOwnProperty(e.field)&&!N(r,a||e.type)||s.push(B(n.messages.required,e.fullField))};let U;const K=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,L=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Y={integer:e=>Y.number(e)&&parseInt(e,10)===e,float:e=>Y.number(e)&&!Y.integer(e),array:e=>Array.isArray(e),regexp(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(r){return!1}},date:e=>"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime()),number:e=>!isNaN(e)&&"number"==typeof e,object:e=>"object"==typeof e&&!Y.array(e),method:e=>"function"==typeof e,email:e=>"string"==typeof e&&e.length<=320&&!!e.match(K),url:e=>"string"==typeof e&&e.length<=2048&&!!e.match((()=>{if(U)return U;const e="[a-fA-F\\d:]",r=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${e})|(?<=${e})(?=\\s|$))`:"",t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",n=`\n(?:\n(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${s}:){6}(?:${t}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${s}:){5}(?::${t}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${s}:){4}(?:(?::${s}){0,1}:${t}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${s}:){3}(?:(?::${s}){0,2}:${t}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${s}:){2}(?:(?::${s}){0,3}:${t}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${s}:){1}(?:(?::${s}){0,4}:${t}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${s}){0,5}:${t}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp(`(?:^${t}$)|(?:^${n}$)`),l=new RegExp(`^${t}$`),i=new RegExp(`^${n}$`),o=e=>e&&e.exact?a:new RegExp(`(?:${r(e)}${t}${r(e)})|(?:${r(e)}${n}${r(e)})`,"g");o.v4=e=>e&&e.exact?l:new RegExp(`${r(e)}${t}${r(e)}`,"g"),o.v6=e=>e&&e.exact?i:new RegExp(`${r(e)}${n}${r(e)}`,"g");const u=o.v4().source,d=o.v6().source;return U=new RegExp(`(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${u}|${d}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)`,"i"),U})()),hex:e=>"string"==typeof e&&!!e.match(L)},G={required:J,whitespace:(e,r,t,s,n)=>{(/^\s+$/.test(r)||""===r)&&s.push(B(n.messages.whitespace,e.fullField))},type:(e,r,t,s,n)=>{if(e.required&&void 0===r)return void J(e,r,t,s,n);const a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?Y[a](r)||s.push(B(n.messages.types[a],e.fullField,e.type)):a&&typeof r!==e.type&&s.push(B(n.messages.types[a],e.fullField,e.type))},range:(e,r,t,s,n)=>{const a="number"==typeof e.len,l="number"==typeof e.min,i="number"==typeof e.max,o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;let u=r,d=null;const f="number"==typeof r,c="string"==typeof r,p=Array.isArray(r);if(f?d="number":c?d="string":p&&(d="array"),!d)return!1;p&&(u=r.length),c&&(u=r.replace(o,"_").length),a?u!==e.len&&s.push(B(n.messages[d].len,e.fullField,e.len)):l&&!i&&u<e.min?s.push(B(n.messages[d].min,e.fullField,e.min)):i&&!l&&u>e.max?s.push(B(n.messages[d].max,e.fullField,e.max)):l&&i&&(u<e.min||u>e.max)&&s.push(B(n.messages[d].range,e.fullField,e.min,e.max))},enum:(e,r,t,s,n)=>{e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(r)&&s.push(B(n.messages.enum,e.fullField,e.enum.join(", ")))},pattern:(e,r,t,s,n)=>{if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||s.push(B(n.messages.pattern.mismatch,e.fullField,r,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(r)||s.push(B(n.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},Q=(e,r,t,s,n)=>{const a=e.type,l=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r,a)&&!e.required)return t();G.required(e,r,s,l,n,a),N(r,a)||G.type(e,r,s,l,n)}t(l)},X={string:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r,"string")&&!e.required)return t();G.required(e,r,s,a,n,"string"),N(r,"string")||(G.type(e,r,s,a,n),G.range(e,r,s,a,n),G.pattern(e,r,s,a,n),!0===e.whitespace&&G.whitespace(e,r,s,a,n))}t(a)},method:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&G.type(e,r,s,a,n)}t(a)},number:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(""===r&&(r=void 0),N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&(G.type(e,r,s,a,n),G.range(e,r,s,a,n))}t(a)},boolean:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&G.type(e,r,s,a,n)}t(a)},regexp:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),N(r)||G.type(e,r,s,a,n)}t(a)},integer:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&(G.type(e,r,s,a,n),G.range(e,r,s,a,n))}t(a)},float:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&(G.type(e,r,s,a,n),G.range(e,r,s,a,n))}t(a)},array:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(null==r&&!e.required)return t();G.required(e,r,s,a,n,"array"),null!=r&&(G.type(e,r,s,a,n),G.range(e,r,s,a,n))}t(a)},object:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&G.type(e,r,s,a,n)}t(a)},enum:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n),void 0!==r&&G.enum(e,r,s,a,n)}t(a)},pattern:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r,"string")&&!e.required)return t();G.required(e,r,s,a,n),N(r,"string")||G.pattern(e,r,s,a,n)}t(a)},date:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r,"date")&&!e.required)return t();if(G.required(e,r,s,a,n),!N(r,"date")){let t;t=r instanceof Date?r:new Date(r),G.type(e,t,s,a,n),t&&G.range(e,t.getTime(),s,a,n)}}t(a)},url:Q,hex:Q,email:Q,required:(e,r,t,s,n)=>{const a=[],l=Array.isArray(r)?"array":typeof r;G.required(e,r,s,a,n,l),t(a)},any:(e,r,t,s,n)=>{const a=[];if(e.required||!e.required&&s.hasOwnProperty(e.field)){if(N(r)&&!e.required)return t();G.required(e,r,s,a,n)}t(a)}};function ee(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone(){const e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}const re=ee(),te=class e{constructor(e){this.rules=null,this._messages=re,this.define(e)}define(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((r=>{const t=e[r];this.rules[r]=Array.isArray(t)?t:[t]}))}messages(e){return e&&(this._messages=Z(ee(),e)),this._messages}validate(r,t={},s=(()=>{})){let n=r,a=t,l=s;if("function"==typeof a&&(l=a,a={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(null,n),Promise.resolve(n);if(a.messages){let e=this.messages();e===re&&(e=ee()),Z(e,a.messages),a.messages=e}else a.messages=this.messages();const i={};(a.keys||Object.keys(this.rules)).forEach((e=>{const t=this.rules[e];let s=n[e];t.forEach((t=>{let a=t;"function"==typeof a.transform&&(n===r&&(n={...n}),s=n[e]=a.transform(s)),a="function"==typeof a?{validator:a}:{...a},a.validator=this.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=this.getType(a),i[e]=i[e]||[],i[e].push({rule:a,value:s,source:n,field:e}))}))}));const o={};return M(i,a,((r,t)=>{var s;const l=r.rule;let i,u=!("object"!==l.type&&"array"!==l.type||"object"!=typeof l.fields&&"object"!=typeof l.defaultField);function d(e,r){return{...r,fullField:`${l.fullField}.${e}`,fullFields:l.fullFields?[...l.fullFields,e]:[e]}}function f(s=[]){let i=Array.isArray(s)?s:[s];!a.suppressWarning&&i.length&&e.warning("async-validator:",i),i.length&&void 0!==l.message&&(i=[].concat(l.message));let f=i.map(W(l,n));if(a.first&&f.length)return o[l.field]=1,t(f);if(u){if(l.required&&!r.value)return void 0!==l.message?f=[].concat(l.message).map(W(l,n)):a.error&&(f=[a.error(l,B(a.messages.required,l.field))]),t(f);let s={};l.defaultField&&Object.keys(r.value).map((e=>{s[e]=l.defaultField})),s={...s,...r.rule.fields};const i={};Object.keys(s).forEach((e=>{const r=s[e],t=Array.isArray(r)?r:[r];i[e]=t.map(d.bind(null,e))}));const o=new e(i);o.messages(a.messages),r.rule.options&&(r.rule.options.messages=a.messages,r.rule.options.error=a.error),o.validate(r.value,r.rule.options||a,(e=>{const r=[];f&&f.length&&r.push(...f),e&&e.length&&r.push(...e),t(r.length?r:null)}))}else t(f)}if(u=u&&(l.required||!l.required&&r.value),l.field=r.field,l.asyncValidator)i=l.asyncValidator(l,r.value,f,r.source,a);else if(l.validator){try{i=l.validator(l,r.value,f,r.source,a)}catch(c){null==(s=console.error)||s.call(console,c),a.suppressValidatorError||setTimeout((()=>{throw c}),0),f(c.message)}!0===i?f():!1===i?f("function"==typeof l.message?l.message(l.fullField||l.field):l.message||`${l.fullField||l.field} fails`):i instanceof Array?f(i):i instanceof Error&&f(i.message)}i&&i.then&&i.then((()=>f()),(e=>f(e)))}),(e=>{!function(e){let r=[],t={};for(let n=0;n<e.length;n++)s=e[n],Array.isArray(s)?r=r.concat(...s):r.push(s);var s;r.length?(t=S(r),l(r,t)):l(null,n)}(e)}),n)}getType(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!X.hasOwnProperty(e.type))throw new Error(B("Unknown rule type %s",e.type));return e.type||"string"}getValidationMethod(e){if("function"==typeof e.validator)return e.validator;const r=Object.keys(e),t=r.indexOf("message");return-1!==t&&r.splice(t,1),1===r.length&&"required"===r[0]?X.required:X[this.getType(e)]||void 0}};te.register=function(e,r){if("function"!=typeof r)throw new Error("Cannot register a validator by type, validator is not a function");X[e]=r},te.warning=D,te.messages=re,te.validators=X;let se=te;const ne=z(r({name:"VZFormItem",__name:"vz-form-item",props:{prop:{},rules:{},label:{},labelWidth:{},labelPosition:{},labelAlign:{},labelColor:{},required:{type:Boolean,default:!1},border:{type:Boolean,default:!0},iClass:{},iStyle:{}},setup(e,{expose:r}){const F=t(V,void 0),$=e,x=j("form-item"),z=s((()=>x.cssVarBlock({"label-width":A($.labelWidth||(null==F?void 0:F.labelWidth)),"label-color":$.labelColor||(null==F?void 0:F.labelColor)}))),R=s((()=>$.labelPosition?"top"===$.labelPosition:"top"===(null==F?void 0:F.labelPosition))),T=n(""),D=n("");let S,B=!1;const N=s((()=>{const e=null==F?void 0:F.model;if(e&&$.prop)return P(e,$.prop)})),H=s((()=>{const e=[];$.rules&&e.push(...k($.rules));const r=null==F?void 0:F.rules;if(r&&$.prop){const t=P(r,$.prop);t&&e.push(...k(t))}return e})),I=s((()=>H.value.some((e=>e.required))));function M(){$.prop,null==F||F.model}const W=async(e,r)=>{if(B)return!1;if(!$.prop||!(null==F?void 0:F.model))return M(),null==r||r(!1),!1;const t=function(e){return H.value.filter((r=>!r.trigger||!e||(Array.isArray(r.trigger)?r.trigger.includes(e):r.trigger===e)))}(e);if(!t.length)return null==r||r(!0),!0;return new se({[$.prop]:t}).validate({[$.prop]:N.value},{firstFields:!0}).then((()=>(T.value="success",D.value="",null==r||r(!0),!0))).catch((e=>{const{errors:t,fields:s}=e;return function(e){T.value="error",D.value=e[0].message||"","toast"===(null==F?void 0:F.messageType)&&D.value&&w({icon:"none",title:D.value})}(t),null==r||r(!1,{errors:t,fields:s}),!r&&Promise.reject({errors:t,fields:s})}))},Z=()=>{T.value="",D.value=""},J=async()=>{$.prop&&(null==F?void 0:F.model)?(B=!0,_(null==F?void 0:F.model,$.prop,O(S)),await E(),Z(),B=!1):M()},U=a({prop:$.prop,validate:W,clearValidate:Z,resetField:J});return l(C,U),i((()=>{$.prop&&(null==F||F.addChild(U),S=O(N.value))})),o((()=>{null==F||F.removeChild(U)})),r({validateState:T,validateMessage:D,validate:W,clearValidate:Z,resetField:J}),(e,r)=>{var t,s;const n=q;return u(),d(n,{class:c([p(x).b(),p(x).m(null==(t=p(F))?void 0:t.messageType),p(x).is("vertical",R.value),p(x).is("border",e.border),p(x).is("feedback",null==(s=p(F))?void 0:s.borderFeedback),p(x).is("error","error"===T.value),e.iClass]),style:b([z.value,e.iStyle])},{default:f((()=>{var r,t,s,a,l;return[e.label||e.$slots.label?(u(),d(n,{key:0,class:c([p(x).e("label"),p(x).em("label",e.labelAlign||(null==(r=p(F))?void 0:r.labelAlign)),p(x).is("required",!(null==(t=p(F))?void 0:t.requiredHide)&&(e.required||I.value)),p(x).is("required-holder",!(null==(s=p(F))?void 0:s.requiredHide)&&(null==(a=p(F))?void 0:a.requiredHolder)),"right"===(null==(l=p(F))?void 0:l.requiredPosition)?"is-required-right":"is-required-left"])},{default:f((()=>[m(e.$slots,"label",{},(()=>[h(v(e.label),1)]),!0)])),_:3},8,["class"])):g("",!0),y(n,{class:c(p(x).e("content"))},{default:f((()=>{var r;return[m(e.$slots,"default",{},void 0,!0),"undertext"===(null==(r=p(F))?void 0:r.messageType)?(u(),d(n,{key:0,class:c(p(x).e("error"))},{default:f((()=>[h(v(D.value),1)])),_:1},8,["class"])):g("",!0)]})),_:3},8,["class"])]})),_:3},8,["class","style"])}}}),[["__scopeId","data-v-3406448f"]]),ae=r({name:"VZForm",__name:"vz-form",props:{model:{},rules:{},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},labelWidth:{},labelPosition:{},labelAlign:{},labelColor:{},requiredHide:{type:Boolean,default:!1},requiredHolder:{type:Boolean,default:!0},requiredPosition:{default:"left"},messageType:{default:"toast"},borderFeedback:{type:Boolean,default:!1},iClass:{},iStyle:{}},setup(e,{expose:r}){const t=e,s=j("form"),n=[];function i(e){const r=k(e);return r.length?n.filter((e=>e.prop&&r.includes(e.prop))):n}async function o(e,r){if(!t.model)return null==r||r(!1),!1;const s=i(e);if(!s.length)return null==r||r(!0),!0;let n=[],a={};for(const i of s)try{await i.validate("")}catch({errors:l,fields:o}){if(l&&o&&(n=[...n,...l],a={...a,...o}),"toast"==t.messageType)break}return n.length?("toast"===t.messageType&&w({icon:"none",title:n[0].message||""}),null==r||r(!1,{errors:n,fields:a}),!r&&Promise.reject({errors:n,fields:a})):(null==r||r(!0),!0)}const g=(e,r)=>o(e,r),y=e=>{t.model&&i(e).forEach((e=>e.resetField()))},h=e=>{i(e).forEach((e=>e.clearValidate()))},v=a({...F(t),addChild:e=>{n.push(e)},removeChild:e=>{e.prop&&n.splice(n.indexOf(e),1)},validateField:g,clearValidate:h,resetFields:y});return l(V,v),r({validate:e=>o(void 0,e),validateField:g,clearValidate:h,resetFields:y}),(e,r)=>{const t=q;return u(),d(t,{class:c([p(s).b(),e.iClass]),style:b(e.iStyle)},{default:f((()=>[m(e.$slots,"default")])),_:3},8,["class","style"])}}}),le=z(r({__name:"index",setup(r){const t=a({username:"",password:""}),s=a({username:[{required:!0,message:"请输入用户名"},{min:6,max:10,message:"用户名 6-10 位"}],password:[{required:!0,message:"请输入密码"},{min:6,max:10,message:"密码 6-10 位"}]}),l=n();async function i(){var e;try{await(null==(e=l.value)?void 0:e.validate())&&console.log("submit!")}catch(r){const{errors:e,fields:t}=r;(null==e?void 0:e.length)&&console.log(e,t)}}function o(){var e;null==(e=l.value)||e.clearValidate()}function c(){var e;null==(e=l.value)||e.resetFields()}return(r,n)=>{const a=x($("vz-input"),e),p=x($("vz-form-item"),ne),m=x($("vz-form"),ae),g=x($("vz-button"),R),v=q;return u(),d(v,{class:"app-page is-power"},{default:f((()=>[y(m,{ref_key:"fromRef",ref:l,model:t,rules:s,"message-type":"undertext","label-color":"var(--app-text-color-thin)"},{default:f((()=>[y(p,{label:"用户",prop:"username"},{default:f((()=>[y(a,{modelValue:t.username,"onUpdate:modelValue":n[0]||(n[0]=e=>t.username=e),placeholder:"请输入用户名",type:"text",clearable:""},null,8,["modelValue"])])),_:1}),y(p,{label:"密码",prop:"password"},{default:f((()=>[y(a,{modelValue:t.password,"onUpdate:modelValue":n[1]||(n[1]=e=>t.password=e),placeholder:"请输入密码",type:"password","password-showable":"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),y(g,{block:"","i-class":"sc-mt-30",onClick:i},{default:f((()=>[h("提交")])),_:1}),y(g,{block:"","i-class":"sc-mt-30",onClick:o},{default:f((()=>[h("清空校验")])),_:1}),y(g,{block:"","i-class":"sc-mt-30",onClick:c},{default:f((()=>[h("重置")])),_:1})])),_:1})}}}),[["__scopeId","data-v-a7932664"]]);export{le as default};
