import{_ as e}from"./vz-input.BTmdDwcX.js";import{d as a,J as l,K as s,L as o,o as t,c as r,w as i,n,p as d,u,q as m,f as p,l as c,r as f,a as v,b,e as y}from"./index-Blpl2poy.js";import{r as _}from"./uni-app.es.BR6pCtX8.js";import{_ as g}from"./vz-form-item.DYnQ5ZBp.js";import{c as h}from"./bem.DA8SpLb8.js";import{a as j}from"./utils.ULpyx3YV.js";import{F as w}from"./constants.Dht7B1D0.js";import{_ as x}from"./vz-button.BehHfqzW.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./vz-icon.7LV43ILB.js";import"./unit.Ce8tXKdL.js";import"./vz-loading.CZ5-Rxov.js";const k=a({name:"VZForm",__name:"vz-form",props:{model:{},rules:{},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},labelWidth:{},labelPosition:{},labelAlign:{},labelColor:{},requiredHide:{type:Boolean,default:!1},requiredHolder:{type:Boolean,default:!0},requiredPosition:{default:"left"},messageType:{default:"toast"},borderFeedback:{type:Boolean,default:!1},iClass:{},iStyle:{}},setup(e,{expose:a}){const f=e,v=h("form"),b=[];function y(e){const a=j(e);return a.length?b.filter((e=>e.prop&&a.includes(e.prop))):b}async function _(e,a){if(!f.model)return null==a||a(!1),!1;const l=y(e);if(!l.length)return null==a||a(!0),!0;let s=[],o={};for(const i of l)try{await i.validate("")}catch({errors:t,fields:r}){if(t&&r&&(s=[...s,...t],o={...o,...r}),"toast"==f.messageType)break}return s.length?("toast"===f.messageType&&c({icon:"none",title:s[0].message||""}),null==a||a(!1,{errors:s,fields:o}),!a&&Promise.reject({errors:s,fields:o})):(null==a||a(!0),!0)}const g=(e,a)=>_(e,a),x=e=>{f.model&&y(e).forEach((e=>e.resetField()))},V=e=>{y(e).forEach((e=>e.clearValidate()))},k=l({...s(f),addChild:e=>{b.push(e)},removeChild:e=>{e.prop&&b.splice(b.indexOf(e),1)},validateField:g,clearValidate:V,resetFields:x});return o(w,k),a({validate:e=>_(void 0,e),validateField:g,clearValidate:V,resetFields:x}),(e,a)=>{const l=p;return t(),r(l,{class:d([u(v).b(),e.iClass]),style:m(e.iStyle)},{default:i((()=>[n(e.$slots,"default")])),_:3},8,["class","style"])}}}),z=V(a({__name:"index",setup(a){const s=l({username:"",password:""}),o=l({username:[{required:!0,message:"请输入用户名"},{min:6,max:10,message:"用户名 6-10 位"}],password:[{required:!0,message:"请输入密码"},{min:6,max:10,message:"密码 6-10 位"}]}),n=f();async function d(){var e;try{await(null==(e=n.value)?void 0:e.validate())&&console.log("submit!")}catch(a){const{errors:e,fields:l}=a;(null==e?void 0:e.length)&&console.log(e,l)}}function u(){var e;null==(e=n.value)||e.clearValidate()}function m(){var e;null==(e=n.value)||e.resetFields()}return(a,l)=>{const c=_(v("vz-input"),e),f=_(v("vz-form-item"),g),h=_(v("vz-form"),k),j=_(v("vz-button"),x),w=p;return t(),r(w,{class:"app-page is-power"},{default:i((()=>[b(h,{ref_key:"fromRef",ref:n,model:s,rules:o,"message-type":"undertext","label-color":"var(--app-text-color-thin)"},{default:i((()=>[b(f,{label:"用户",prop:"username"},{default:i((()=>[b(c,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=e=>s.username=e),placeholder:"请输入用户名",type:"text",clearable:""},null,8,["modelValue"])])),_:1}),b(f,{label:"密码",prop:"password"},{default:i((()=>[b(c,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.password=e),placeholder:"请输入密码",type:"password","password-showable":"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),b(j,{block:"","i-class":"sc-mt-30",onClick:d},{default:i((()=>[y("提交")])),_:1}),b(j,{block:"","i-class":"sc-mt-30",onClick:u},{default:i((()=>[y("清空校验")])),_:1}),b(j,{block:"","i-class":"sc-mt-30",onClick:m},{default:i((()=>[y("重置")])),_:1})])),_:1})}}}),[["__scopeId","data-v-a7932664"]]);export{z as default};
