import{d as e,E as a,m as t,M as s,r as l,o as n,c as o,p as i,u as r,q as u,U as d,R as c,a as m,w as p,f as v,b as f}from"./index-EUel_XYz.js";import{c as h}from"./bem.DA8SpLb8.js";import{a as g,t as x}from"./unit.icpP3CzZ.js";import{r as y}from"./utils.Cxb1e_sX.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as _}from"./uni-app.es.CgqJnnkI.js";function j(e,a){return`rgb(${y(e,a)},${y(e,a)},${y(e,a)})`}const b="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",$=w(e({__name:"vz-validator",props:{modelValue:{},width:{default:"160rpx"},height:{default:"70rpx"},length:{default:4}},emits:["update:modelValue"],setup(e,{expose:m,emit:p}){const v=c();a().pixelRatio;const f=e,w=p,_=h("validator"),$=t((()=>`${_.b()}-${v.uid}`)),B=t((()=>_.cssVarBlock({width:g(f.width),height:g(f.height)}))),V=t((()=>x(f.width))),E=t((()=>x(f.height))),I=t((()=>Number(f.length)));let R=null,S=null;s((async()=>{R=await new Promise((e=>{e(document.getElementById(`${$.value}`).getElementsByTagName("canvas")[0])})),S=await async function(){return S=R.getContext("2d"),S}(),C()}));let k=l("");function C(){if(S){k.value="",S.fillStyle=j(180,230),S.fillRect(0,0,V.value,E.value);for(let e=0;e<I.value;e++){const a=b[y(0,b.length)];k.value+=a;const t=y(E.value/2,E.value);S.font=t+"px Simhei",S.textBaseline="top",S.fillStyle=j(80,150);const s=y(-30,30);S.save();const l=V.value/I.value;S.translate(l*e+l/2,E.value/2),S.rotate(s*Math.PI/180),S.fillText(a,-t/4,-t/2),S.restore()}w("update:modelValue",k.value)}}return m({key:k,refresh:C}),(e,a)=>{const t=d;return n(),o(t,{type:"2d","canvas-id":$.value,id:$.value,class:i(r(_).b()),style:u(B.value),onClick:C},null,8,["canvas-id","id","class","style"])}}}),[["__scopeId","data-v-5a1461f1"]]);const B=w({},[["render",function(e,a){const t=_(m("vz-validator"),$),s=v;return n(),o(s,{class:""},{default:p((()=>[f(t)])),_:1})}]]);export{B as default};
