import{d as e,E as a,m as t,R as s,r as l,o as n,c as o,p as i,u as r,q as u,W as d,U as c,a as m,w as p,f as v,b as f}from"./index-BWsgb0Z6.js";import{c as h}from"./bem.DA8SpLb8.js";import{a as g,t as x}from"./unit.BrsgufDc.js";import{r as y}from"./utils.nWkN1vD-.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as _}from"./uni-app.es.OTBXlo_2.js";function b(e,a){return`rgb(${y(e,a)},${y(e,a)},${y(e,a)})`}const j="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",$=w(e({__name:"vz-validator",props:{modelValue:{},width:{default:"160rpx"},height:{default:"70rpx"},length:{default:4}},emits:["update:modelValue"],setup(e,{expose:m,emit:p}){const v=c();a().pixelRatio;const f=e,w=p,_=h("validator"),$=t((()=>`${_.b()}-${v.uid}`)),B=t((()=>_.cssVarBlock({width:g(f.width),height:g(f.height)}))),V=t((()=>x(f.width))),k=t((()=>x(f.height))),E=t((()=>Number(f.length)));let I=null,R=null;s((async()=>{I=await new Promise((e=>{e(document.getElementById(`${$.value}`).getElementsByTagName("canvas")[0])})),R=await async function(){return R=I.getContext("2d"),R}(),C()}));let S=l("");function C(){if(R){S.value="",R.fillStyle=b(180,230),R.fillRect(0,0,V.value,k.value);for(let e=0;e<E.value;e++){const a=j[y(0,j.length)];S.value+=a;const t=y(k.value/2,k.value);R.font=t+"px Simhei",R.textBaseline="top",R.fillStyle=b(80,150);const s=y(-30,30);R.save();const l=V.value/E.value;R.translate(l*e+l/2,k.value/2),R.rotate(s*Math.PI/180),R.fillText(a,-t/4,-t/2),R.restore()}w("update:modelValue",S.value)}}return m({key:S,refresh:C}),(e,a)=>{const t=d;return n(),o(t,{type:"2d","canvas-id":$.value,id:$.value,class:i(r(_).b()),style:u(B.value),onClick:C},null,8,["canvas-id","id","class","style"])}}}),[["__scopeId","data-v-5a1461f1"]]);const B=w({},[["render",function(e,a){const t=_(m("vz-validator"),$),s=v;return n(),o(s,{class:""},{default:p((()=>[f(t)])),_:1})}]]);export{B as default};
