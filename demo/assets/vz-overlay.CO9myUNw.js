import{m as e,r as a,H as t,I as o,d as n,z as l,A as s,B as i,u,o as r,c as d,w as v,n as c,p as f,q as m,C as p,f as $}from"./index-Blpl2poy.js";import{c as h}from"./bem.DA8SpLb8.js";import{a as b}from"./unit.Ce8tXKdL.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";function E(n){const{namespace:l="vz",show:s=!1,duration:i,beforeEnter:u,enter:r,afterEnter:d,beforeLeave:v,leave:c,afterLeave:f}=n||{},m=e((()=>n.mode?t(n.mode)?n.mode.value:n.mode:"fade"));let p="";const $=a(t(s)?s.value:s),h=a("");let b=null;function w(){b&&(clearTimeout(b),b=null),b=setTimeout((()=>{E()}),i)}function E(){p&&("enter"===p?d&&d():"leave"===p&&(f&&f(),$.value=!1),h.value="",p="")}return{isShow:$,currentClass:h,onEnter:function(){$.value||(p="enter",$.value=!0,u&&u(),h.value=`${l}-${m.value}-enter-from ${l}-${m.value}-leave-active`,o((()=>{setTimeout((()=>{h.value=`${l}-${m.value}-enter-to ${l}-${m.value}-enter-active`,r&&r(),w()}),20)})))},onLeave:function(){$.value&&(p="leave",v&&v(),h.value=`${l}-${m.value}-leave-from ${l}-${m.value}-leave-active`,o((()=>{setTimeout((()=>{h.value=`${l}-${m.value}-leave-to ${l}-${m.value}-leave-active`,c&&c(),w()}),20)})))},onEnd:E}}const _={fade:"fade-in","slide-top":"slide-down-in","slide-bottom":"slide-up-in","slide-left":"slide-left-in","slide-right":"slide-right-in"},g={fade:"fade-out","slide-top":"slide-up-out","slide-bottom":"slide-down-out","slide-left":"slide-left-out","slide-right":"slide-right-out"};function y(o){const{namespace:n="vz",show:l=!1,duration:s,beforeEnter:i,enter:u,afterEnter:r,beforeLeave:d,leave:v,afterLeave:c}=o||{},f=e((()=>o.mode?t(o.mode)?o.mode.value:o.mode:"fade"));let m=a("");const p=a(t(l)?l.value:l),$=a("");let h=null;function b(){h&&(clearTimeout(h),h=null),h=setTimeout((()=>{w()}),s)}function w(){m.value&&("enter"===m.value?r&&r():"leave"===m.value&&(c&&c(),p.value=!1),$.value="",m.value="")}return{isShow:p,status:m,currentClass:$,onEnter:function(){m.value="enter",p.value=!0,i&&i(),$.value=`${n}-animation__${_[f.value]}`,u&&u(),b()},onLeave:function(){m.value="leave",d&&d(),$.value=`${n}-animation__${g[f.value]}`,v&&v(),b()},onEnd:w}}const L=w(n({name:"VZOverlay",__name:"vz-overlay",props:{show:{type:Boolean,default:!1},zIndex:{},top:{},bottom:{},left:{},right:{},closeable:{type:Boolean,default:!1},background:{},animation:{type:Boolean,default:!1},duration:{default:250},iClass:{},iStyle:{}},emits:["update:show","click","open","opened","close","closed"],setup(a,{emit:t}){const o=a,n=t,w=h("overlay"),_=e((()=>({...w.cssVar({"transition-duration":o.animation?"":`${o.duration}ms`,"animation-duration":o.animation?`${o.duration}ms`:""}),...w.cssVarBlock({"z-index":`${o.zIndex||""}`,top:b(o.top),bottom:b(o.bottom),left:b(o.left),right:b(o.right),background:o.background})})));function g(e){n("click",e),o.closeable&&n("update:show",!1)}const L=o.animation?y:E,{isShow:k,currentClass:T,onEnter:z,onLeave:C,onEnd:x}=L({show:o.show,duration:o.duration,beforeEnter(){n("open")},afterEnter(){n("opened")},beforeLeave(){n("close")},afterLeave(){n("closed")}});return l((()=>o.show),(e=>{e?z():C()})),(e,a)=>{const t=$;return s((r(),d(t,{class:f([u(w).b(),u(T),e.iClass]),style:m([_.value,e.iStyle]),onClick:g,onTransitionend:p(u(x),["stop"]),onAnimationend:p(u(x),["stop"])},{default:v((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onTransitionend","onAnimationend"])),[[i,0==e.duration?e.show:u(k)]])}}}),[["__scopeId","data-v-a0746102"]]);export{L as V,E as a,y as u};
